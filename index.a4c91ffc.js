function e(e,t){var i=function(e){for(var t=e.split(/([#.])/),i="",n="",o=[],r=0;r<t.length;r++){var s=t[r];"#"===s?n=t[++r]:"."===s?o.push(t[++r]):s.length&&(i=s)}return{tag:i||"div",id:n,className:o.join(" ")}}(e),n=i.tag,o=i.id,r=i.className,s=t?document.createElementNS(t,n):document.createElement(n);return o&&(s.id=o),r&&(t?s.setAttribute("class",r):s.className=r),s}function t(e,t){var n=p(e),o=p(t);return t===o&&o.__redom_view&&(t=o.__redom_view),o.parentNode&&(i(t,o,n),n.removeChild(o)),t}function i(e,t,i){var o=t.__redom_lifecycle;if(n(o))t.__redom_lifecycle={};else{var r=i;for(t.__redom_mounted&&l(t,"onunmount");r;){var s=r.__redom_lifecycle||{};for(var a in o)s[a]&&(s[a]-=o[a]);n(s)&&(r.__redom_lifecycle=null),r=r.parentNode}}}function n(e){if(null==e)return!0;for(var t in e)if(e[t])return!1;return!0}var o=["onmount","onremount","onunmount"],r="undefined"!=typeof window&&"ShadowRoot"in window;function s(e,t,n,s){var a=p(e),u=p(t);t===u&&u.__redom_view&&(t=u.__redom_view),t!==u&&(u.__redom_view=t);var d=u.__redom_mounted,c=u.parentNode;return d&&c!==a&&i(0,u,c),null!=n?s?a.replaceChild(u,p(n)):a.insertBefore(u,p(n)):a.appendChild(u),function(e,t,i,n){for(var s=t.__redom_lifecycle||(t.__redom_lifecycle={}),a=i===n,u=!1,d=0,c=o;d<c.length;d+=1){var h=c[d];a||e!==t&&h in e&&(s[h]=(s[h]||0)+1),s[h]&&(u=!0)}if(!u)return void(t.__redom_lifecycle={});var f=i,v=!1;(a||f&&f.__redom_mounted)&&(l(t,a?"onremount":"onmount"),v=!0);for(;f;){var p=f.parentNode,_=f.__redom_lifecycle||(f.__redom_lifecycle={});for(var w in s)_[w]=(_[w]||0)+s[w];if(v)break;(f.nodeType===Node.DOCUMENT_NODE||r&&f instanceof ShadowRoot||p&&p.__redom_mounted)&&(l(f,a?"onremount":"onmount"),v=!0),f=p}}(t,u,a,c),t}function l(e,t){"onmount"===t||"onremount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var i=e.__redom_lifecycle;if(i){var n=e.__redom_view,o=0;for(var r in n&&n[t]&&n[t](),i)r&&o++;if(o)for(var s=e.firstChild;s;){var a=s.nextSibling;l(s,t),s=a}}}function a(e,t,i){e.style[t]=null==i?"":i}function u(e,t,i,n){var o=p(e);if("object"==typeof t)for(var r in t)u(o,r,t[r],n);else{var s=o instanceof SVGElement,l="function"==typeof i;if("style"===t&&"object"==typeof i)!function(e,t,i){var n=p(e);if("object"==typeof t)for(var o in t)a(n,o,t[o]);else a(n,t,i)}(o,i);else if(s&&l)o[t]=i;else if("dataset"===t)c(o,i);else if(s||!(t in o)&&!l||"list"===t){if(s&&"xlink"===t)return void d(o,i);n&&"class"===t&&(i=o.className+" "+i),null==i?o.removeAttribute(t):o.setAttribute(t,i)}else o[t]=i}}function d(e,t,i){if("object"==typeof t)for(var n in t)d(e,n,t[n]);else null!=i?e.setAttributeNS("http://www.w3.org/1999/xlink",t,i):e.removeAttributeNS("http://www.w3.org/1999/xlink",t,i)}function c(e,t,i){if("object"==typeof t)for(var n in t)c(e,n,t[n]);else null!=i?e.dataset[t]=i:delete e.dataset[t]}function h(e){return document.createTextNode(null!=e?e:"")}function f(e,t,i){for(var n=0,o=t;n<o.length;n+=1){var r=o[n];if(0===r||r){var l=typeof r;"function"===l?r(e):"string"===l||"number"===l?e.appendChild(h(r)):_(p(r))?s(e,r):r.length?f(e,r,i):"object"===l&&u(e,r,null,i)}}}function v(e){return"string"==typeof e?m(e):p(e)}function p(e){return e.nodeType&&e||!e.el&&e||p(e.el)}function _(e){return e&&e.nodeType}var w={};function m(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=y(e).cloneNode(!1);else if(_(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return f(p(t),i,!0),t}var g=m;function y(t){return w[t]||(w[t]=e(t))}function b(e){for(var i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];for(var o=p(e),r=k(e,i,o.firstChild);r;){var s=r.nextSibling;t(e,r),r=s}}function k(e,t,i){for(var n=i,o=new Array(t.length),r=0;r<t.length;r++)o[r]=t[r]&&p(t[r]);for(var l=0;l<t.length;l++){var a=t[l];if(a){var u=o[l];if(u!==n)if(_(u)){var d=n&&n.nextSibling,c=null!=a.__redom_index&&d===o[l+1];s(e,a,n,c),c&&(n=d)}else null!=a.length&&(n=k(e,a,n));else n=n.nextSibling}}return n}m.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=y(e);return m.bind.apply(m,[this,n].concat(t))};var N=function(e,t,i){this.View=e,this.initData=i,this.oldLookup={},this.lookup={},this.oldViews=[],this.views=[],null!=t&&(this.key="function"==typeof t?t:function(e){return function(t){return t[e]}}(t))};N.prototype.update=function(e,t){for(var i=this,n=i.View,o=i.key,r=i.initData,s=null!=o,l=this.lookup,a={},u=new Array(e.length),d=this.views,c=0;c<e.length;c++){var h=e[c],f=void 0;if(s){var v=o(h);f=l[v]||new n(r,h,c,e),a[v]=f,f.__redom_id=v}else f=d[c]||new n(r,h,c,e);f.update&&f.update(h,c,e,t),p(f.el).__redom_view=f,u[c]=f}this.oldViews=d,this.views=u,this.oldLookup=l,this.lookup=a};var E=function(e,t,i,n){this.View=t,this.initData=n,this.views=[],this.pool=new N(t,i,n),this.el=v(e),this.keySet=null!=i};E.prototype.update=function(e,i){void 0===e&&(e=[]);var n=this.keySet,o=this.views;this.pool.update(e,i);var r=this.pool,s=r.views,l=r.lookup;if(n)for(var a=0;a<o.length;a++){var u=o[a];null==l[u.__redom_id]&&(u.__redom_index=null,t(this,u))}for(var d=0;d<s.length;d++){s[d].__redom_index=d}b(this,s),n&&(this.lookup=l),this.views=s},E.extend=function(e,t,i,n){return E.bind(E,e,t,i,n)},E.extend;var x=function(e,t){this.el=h(""),this.visible=!1,this.view=null,this._placeholder=this.el,e instanceof Node?this._el=e:e.el instanceof Node?(this._el=e,this.view=e):this._View=e,this._initData=t};x.prototype.update=function(e,i){var n=this._placeholder,o=this.el.parentNode;if(e){if(!this.visible)if(this._el)s(o,this._el,n),t(o,n),this.el=p(this._el),this.visible=e;else{var r=new(0,this._View)(this._initData);this.el=p(r),this.view=r,s(o,r,n),t(o,n)}this.view&&this.view.update&&this.view.update(i)}else if(this.visible){if(this._el)return s(o,n,this._el),t(o,this._el),this.el=n,void(this.visible=e);s(o,n,this.view),t(o,this.view),this.el=n,this.view=null}this.visible=e};var A=function(e,t,i){this.el=v(e),this.Views=t,this.initData=i};A.prototype.update=function(e,t){if(e!==this.route){var i=this.Views[e];this.route=e,i&&(i instanceof Node||i.el instanceof Node)?this.view=i:this.view=i&&new i(this.initData,t),b(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var S={};function L(e){for(var t,i=[],n=arguments.length-1;n-- >0;)i[n]=arguments[n+1];var o=typeof e;if("string"===o)t=V(e).cloneNode(!1);else if(_(e))t=e.cloneNode(!1);else{if("function"!==o)throw new Error("At least one argument required");var r=e;t=new(Function.prototype.bind.apply(r,[null].concat(i)))}return f(p(t),i,!0),t}function V(t){return S[t]||(S[t]=e(t,"http://www.w3.org/2000/svg"))}L.extend=function(e){var t=V(e);return L.bind(this,t)},L.ns="http://www.w3.org/2000/svg";const j=["agh","no","yes","hohoho","hangup","pickup"];class D{constructor(){this.hasEnable=!1,this.countIdle=0,this.videos={};for(const e of j){const t=g("source",{src:`${e}.mp4`}),i=g("video",{className:"hidden"},[t]);this.videos[e]=i,s(document.body,i)}this.videos.pickup.classList.remove("hidden"),this.pickup=g("img",{src:"pickup.png"}),this.hangup=g("img",{src:"hangup.png",className:"hidden"});const e=g("div",{className:"phone-container"},[this.pickup,this.hangup]);s(document.body,e)}playAnswer(e){Object.values(this.videos).forEach((e=>{e.classList.add("hidden"),e.pause(),e.currentTime=0})),this.videos[e].classList.remove("hidden"),this.videos[e].play()}}try{const e=new D;console.log(e);const t=new(window.SpeechRecognition||window.webkitSpeechRecognition);console.log(t),t.interimResults=!0,t.addEventListener("result",(t=>{const i=t.results[0].isFinal,n=Array.from(t.results).map((e=>e[0])).map((e=>e.transcript)).join("");if(console.log(n),e.countIdle=0,i){const t=(o=0,r=j.length-3,Math.floor(Math.random()*(r-o+1)+o));e.playAnswer(j[t])}var o,r})),t.addEventListener("end",(()=>{e.hasEnable&&(2!==e.countIdle?(t.start(),e.countIdle++):e.hangup.click())})),e.pickup.addEventListener("click",(()=>{e.playAnswer("pickup"),t.start(),e.pickup.classList.add("hidden"),e.hangup.classList.remove("hidden"),e.hasEnable=!0,e.countIdle=0})),e.hangup.addEventListener("click",(()=>{e.playAnswer("hangup"),t.stop(),e.pickup.classList.remove("hidden"),e.hangup.classList.add("hidden"),e.hasEnable=!1,e.countIdle=0}))}catch(e){alert("This browser doesn't support SpeechRecognition API")}
//# sourceMappingURL=index.a4c91ffc.js.map
